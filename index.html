<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday ‚Äî Sahar üéÄüè∏</title>
  <style>
    :root{
      --pink:#ffd1dc; --blush:#fff4f8; --lav:#e9d7ff; --mint:#d7fff3; --sun:#fff3c7;
      --ink:#333; --muted:#7a7a7a; --card:#ffffff; --accent:#ff91a4; --vio:#b68cff;
    }

    /* ===== Base ===== */
    html,body{height:100%}
    body{
      display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0;
      background:
        radial-gradient(1200px 700px at 10% 10%, var(--sun), transparent 60%),
        radial-gradient(900px 600px at 90% 20%, var(--mint), transparent 60%),
        radial-gradient(800px 600px at 10% 90%, var(--lav), transparent 60%),
        linear-gradient(135deg, var(--pink), var(--blush));
      animation:bgShift 16s ease-in-out infinite alternate;
      font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      overflow:hidden; perspective:1000px; color:var(--ink);
    }
    @keyframes bgShift{
      0%{filter:hue-rotate(0deg) saturate(1)}
      100%{filter:hue-rotate(18deg) saturate(1.15)}
    }

    /* ===== Floating Shuttlecocks (background) ===== */
    .bg-shuttle{position:fixed; font-size:22px; opacity:0; animation:float 9s linear infinite; z-index:-1}
    @keyframes float{0%{opacity:0; transform:translateY(100vh) rotate(0deg) scale(.9)}10%{opacity:.12}90%{opacity:.12}100%{opacity:0; transform:translateY(-15vh) rotate(360deg) scale(1)}}

    /* ===== Header Ribbon ===== */
    .ribbon{
      position:fixed; top:10px; left:50%; transform:translateX(-50%);
      background:rgba(255,255,255,.85); backdrop-filter:blur(6px);
      padding:10px 18px; border-radius:999px; box-shadow:0 10px 30px rgba(0,0,0,.12);
      display:flex; align-items:center; gap:10px; z-index:6;
    }
    .titleText{font-weight:900; letter-spacing:.5px;
      background:linear-gradient(90deg,#ff6fa0,#ffb2c1,#b58cff,#7be9cd);
      -webkit-background-clip:text; background-clip:text; color:transparent; font-size:1.1rem;
    }
    .spark{font-size:18px; animation:pulse 1.6s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.25)}}

    /* ===== Playful Mascot (Birthday Cat with Racket) ===== */
    .mascot{position:absolute; width:100px; height:100px; left:50%; top:56px; transform:translateX(-50%); pointer-events:none}
    .cat-head{width:72px; height:58px; background:#808080; border-radius:30px; position:relative; margin:0 auto; box-shadow:0 6px 0 rgba(0,0,0,0.06) inset}
    .ear{position:absolute; top:-16px; width:0; height:0; border-left:13px solid transparent; border-right:13px solid transparent; border-bottom:26px solid #808080}
    .ear.left{left:4px; transform:rotate(-18deg)}
    .ear.right{right:4px; transform:rotate(18deg)}
    .eye{position:absolute; top:22px; width:11px; height:11px; background:#000; border-radius:50%; animation:blink 3.2s infinite}
    .eye.left{left:18px}
    .eye.right{right:18px}
    .nose{position:absolute; top:34px; left:50%; transform:translateX(-50%); width:7px; height:5px; background:#ff9eb5; border-radius:3px}
    .whisker{position:absolute; top:32px; width:22px; height:2px; background:#666}
    .w1{left:-16px; transform:rotate(-10deg)} .w2{left:-16px; top:36px} .w3{left:-16px; top:40px; transform:rotate(10deg)}
    .w4{right:-16px; transform:rotate(10deg)} .w5{right:-16px; top:36px} .w6{right:-16px; top:40px; transform:rotate(-10deg)}
    @keyframes blink{0%,95%,100%{transform:scaleY(1)}97%{transform:scaleY(.1)}}
    .party-hat{position:absolute; left:50%; transform:translateX(-50%) rotate(-5deg); top:-24px; width:0;height:0; border-left:12px solid transparent; border-right:12px solid transparent; border-bottom:26px solid var(--accent)}
    .party-hat:after{content:""; position:absolute; left:-2px; top:-7px; width:6px; height:6px; border-radius:50%; background:#fff}
    .racket{position:absolute; right:-12px; bottom:-6px; width:36px; height:36px; border:2px solid #444; border-radius:50% 50% 44% 44% / 50% 50% 40% 40%; transform:rotate(30deg)}
    .racket:after{content:""; position:absolute; left:14px; bottom:-16px; width:6px; height:22px; background:#444; border-radius:3px}
    /* Sparkles around mascot */
    .sparkle{position:absolute; font-size:14px; animation:twinkle 1.8s ease-in-out infinite; opacity:.8}
    @keyframes twinkle{0%,100%{transform:scale(.8) rotate(0)}50%{transform:scale(1.2) rotate(25deg)}}

    /* ===== Deck ===== */
    .deck-container{position:relative; width:340px; height:460px; margin:70px}
    .card{
      position:absolute; inset:0; background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.85));
      border-radius:22px; padding:20px; box-sizing:border-box; cursor:pointer; transition:transform .85s ease-out, box-shadow .2s ease; backface-visibility:hidden; display:flex; flex-direction:column; align-items:center; justify-content:center; overflow:hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      border: 2px solid transparent;
      background-image:
        linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.85)),
        linear-gradient(135deg, #ffc6d7, #e9d7ff);
      background-origin: border-box; background-clip: content-box, border-box;
    }
    .card:hover{transform:translateX(-2px) translateY(-2px) rotate(0.2deg); box-shadow:0 14px 34px rgba(0,0,0,.12)}

    /* Cute corners */
    .corner{position:absolute; width:42px; height:42px; opacity:.25; display:grid; place-items:center; font-size:24px}
    .tl{top:8px; left:8px; transform:rotate(-20deg)}
    .tr{top:8px; right:8px; transform:rotate(20deg)}
    .bl{bottom:8px; left:8px; transform:rotate(20deg)}
    .br{bottom:8px; right:8px; transform:rotate(-20deg)}

    .title{font-weight:800; font-size:1.4rem; text-align:center; margin:8px 0 4px;
      background:linear-gradient(90deg, #ff7aa2, #b58cff); -webkit-background-clip:text; background-clip:text; color:transparent}
    .subtitle{font-size:1rem; color:var(--muted); margin:0 0 8px}
    .message{font-size:1.15rem; text-align:center; margin:8px 0;}
    .comment{width:92%; min-height:56%; border:2px dashed var(--accent); border-radius:14px; padding:12px; background:
      linear-gradient(45deg, transparent 49%, #fff1f4 49% 51%, transparent 51%);
      background-size:20px 20px; font-family:"Comic Sans MS", "Patrick Hand", system-ui; font-size:17px; color:#444
    }

    /* Scatter poses */
    .card.r0{transform:translate(-80%, -60%) rotate(-15deg)}
    .card.r1{transform:translate(80%, -60%) rotate(15deg)}
    .card.r2{transform:translate(-80%, 60%) rotate(15deg)}
    .card.r3{transform:translate(80%, 60%) rotate(-15deg)}
    .card.r4{transform:translate(-100%, 0) rotate(-10deg)}
    .card.r5{transform:translate(100%, 0) rotate(10deg)}
    .card.r6{transform:translate(0, -90%) rotate(6deg)}
    .card.r7{transform:translate(0, 90%) rotate(-6deg)}
    .card.r8{transform:translate(-60%, -40%) rotate(8deg)}
    .card.r9{transform:translate(60%, 40%) rotate(-8deg)}

    /* Instructions + Button */
    .instructions{position:fixed; bottom:18px; left:50%; transform:translateX(-50%); background:rgba(255,255,255,.9); padding:10px 18px; border-radius:28px; box-shadow:0 6px 22px rgba(0,0,0,.12); z-index:5}
    .restart{position:fixed; top:18px; right:18px; padding:10px 18px; background:var(--accent); color:#fff; border:none; border-radius:22px; cursor:pointer; font-weight:700; box-shadow:0 8px 20px rgba(255,145,164,.45); z-index:5}
    .restart:hover{transform:translateY(-1px)}

    /* Floating hearts & confetti */
    .float{position:absolute; font-size:16px; color:#ff9eb5; animation:up 3s infinite; opacity:0}
    @keyframes up{0%{transform:translateY(0); opacity:0} 50%{opacity:.7} 100%{transform:translateY(-50px); opacity:0}}

    .confetti{position:fixed; inset:0; pointer-events:none; z-index:2}
    .piece{position:absolute; width:8px; height:14px; background:#ffd1dc; animation:drop 3.4s linear forwards}
    .piece:nth-child(3n){background:#d7fff3}
    .piece:nth-child(4n){background:#e9d7ff}
    .piece:nth-child(5n){background:#fff3c7}
    @keyframes drop{0%{transform:translateY(-10vh) rotate(0)} 100%{transform:translateY(110vh) rotate(540deg)}}

    /* ===== Party Overlay (starts the music) ===== */
    .overlay{
      position:fixed; inset:0; background:rgba(255,255,255,.65); backdrop-filter:blur(6px);
      display:grid; place-items:center; z-index:10;
    }
    .cta{
      display:flex; flex-direction:column; align-items:center; gap:14px;
      background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.85));
      padding:24px 28px; border-radius:24px; box-shadow:0 20px 50px rgba(0,0,0,.15);
      border:2px solid #ffe3ea;
      text-align:center;
      animation:pop 0.8s ease both;
    }
    .cta h1{margin:0; font-size:1.4rem}
    .cta .big{font-size:2rem}
    .cta button{border:none; background:linear-gradient(90deg,#ff7aa2,#b58cff); color:#fff; font-weight:900; padding:12px 20px; border-radius:999px; cursor:pointer; box-shadow:0 12px 30px rgba(181,140,255,.35)}
    .cta button:hover{transform:translateY(-1px)}
    @keyframes pop{0%{transform:scale(.9); opacity:0}100%{transform:scale(1); opacity:1}}

    /* ===== Music HUD ===== */
    .hud{position:fixed; bottom:14px; right:14px; z-index:6; display:flex; gap:8px; align-items:center}
    .hud button{border:none; background:#fff; border-radius:999px; padding:10px 12px; box-shadow:0 8px 20px rgba(0,0,0,.12); cursor:pointer}
    .notes{position:fixed; right:24px; bottom:64px; pointer-events:none}
    .note{position:absolute; font-size:18px; opacity:0; animation:noteUp 2.2s linear forwards}
    @keyframes noteUp{0%{transform:translateY(0) translateX(0) rotate(0); opacity:0}20%{opacity:1}100%{transform:translateY(-80px) translateX(-20px) rotate(30deg); opacity:0}}

    /* ===== 3D tilt ===== */
    .tilt{transform-style:preserve-3d}
  </style>
</head>
<body>
  <!-- Background shuttlecocks -->
  <div id="bg"></div>

  <!-- Confetti container -->
  <div class="confetti" id="confetti"></div>

  <!-- Ribbon header -->
  <div class="ribbon"><span class="spark">‚ú®</span><span class="titleText">Happy Birthday, Sahar! üéÇüè∏</span><span class="spark">‚ú®</span></div>

  <!-- Deck -->
  <div class="deck-container tilt" id="deck"></div>
  <button class="restart" onclick="restartDeck()">Reset Deck</button>
  <div class="instructions">Tap the top card to scatter the wishes & start the party! üéâ</div>

  <!-- Party overlay (user gesture to start audio) -->
  <div class="overlay" id="overlay">
    <div class="cta">
      <div class="big">üéÄüé∂</div>
      <h1>Tap to start the birthday party!</h1>
      <button id="startBtn">Play</button>
    </div>
  </div>

  <!-- Music HUD -->
  <div class="hud">
    <button id="toggleMusic" title="Toggle music">üîà</button>
    <div class="notes" id="notes"></div>
  </div>

  <script>
    /* ===== Data: Birthday + Badminton theme ===== */
    const wishes = [
      { title: "Happy Purr-thday, Sahar!", subtitle: "From all of us", mascot:true, message: "Serving you smiles, smashing you joy, and rallying for the best year yet!" },
      { title: "Shuttle of Joy", subtitle: "Fahad", comment: "Let‚Äôs play badminton again soon ‚Äî I miss our rallies, and I definitely owe you a rematch!!" },
      { title: "Ace Another Year", subtitle: "Fahad",  comment: "Let‚Äôs change the muzzle filter to 35 ‚Äî a little longer!!" },
      { title: "Rally of Hugs", subtitle: "Fahad",  comment: "It‚Äôs time we go to the masjid and find you the best match!!" },
      { title: "Feather-Light Fun", subtitle: "Fahad",  comment: "Big thanks for making me create a marriage profile!!" },
      { title: "Match Point: Cake!", subtitle: "Fahad",  comment: "Thanks for getting me hooked on SHEIN ‚Äî my wallet is crying!!!" },
      { title: "Court Couture", subtitle: "Fahad", comment: "Happy Birthday, Sahar! May your special day sparkle with joy and your year ahead be as beautiful as you are!" },
      { title: "Good Vibes Only", subtitle: "Ayush",  comment: "Happy birthday, bacha! Thank you for being the sweetest ADD-ON to my life ‚ù§Ô∏è!" },
      { title: "Paws & Rackets", subtitle: "Ayush", comment: "One of the cutest memories of ours is from the first day on court ‚Äî I was rattling on about things while you were just staring... I was like, ‚ÄòGod, will she please stop staring?‚Äô and then laughing while looking to the other side‚Ä¶ damn, she had already started judging me.!" },
      { title: "Birthday Rally", subtitle: "Ayush",  comment: "You probably have the cutest smile BUA-JI on that bobblehead‚Ä¶ so please just keep it together!" },
      { title: "Birthday Rally", subtitle: "Ayush",  comment: "I love how you ask me something and then never actually listen‚Ä¶ lol. Honestly, those 14 days of studying felt harder than my entire 2 years of Master‚Äôs. As for meditation ‚Äî you learn it first and then teach me, okay? Chill Ayush, I‚Äôll manage üòÖ‚ú®" },
      { title: "Final Set: Wishes", subtitle: "Ayush", comment: "Happy birthday, Sahar! üí´ May you always be blessed with all the happiness in the world. Keep shining and smiling with that adorable bobblehead smile of yours. You‚Äôre truly so talented and sweet, and I know you‚Äôll do amazingly well in life." },
    ];

    function el(tag, cls){ const d=document.createElement(tag); if(cls) d.className=cls; return d; }

    /* ===== Background shuttles ===== */
    function spawnShuttles(){
      const bg=document.getElementById('bg'); bg.innerHTML='';
      for(let i=0;i<22;i++){
        const s=el('div','bg-shuttle'); s.textContent='üè∏';
        s.style.left=Math.random()*100+'vw';
        s.style.animationDelay=(Math.random()*8)+'s';
        s.style.fontSize=(18 + Math.random()*12)+'px';
        bg.appendChild(s);
      }
    }

    /* ===== Confetti ===== */
    function popConfetti(){
      const c=document.getElementById('confetti'); c.innerHTML='';
      const N=80; const w=window.innerWidth;
      for(let i=0;i<N;i++){
        const p=el('span','piece');
        p.style.left=Math.random()*w+'px';
        p.style.top=(-20 - Math.random()*60)+'px';
        p.style.animationDelay=(Math.random()*0.8)+'s';
        p.style.transform=`translateY(-10vh) rotate(${Math.random()*180}deg)`;
        c.appendChild(p);
      }
      setTimeout(()=> c.innerHTML='', 3800);
    }

    /* ===== Mascot ===== */
    function mascotHTML(){
      return `
        <div class="mascot">
          <div class="cat-head">
            <div class="party-hat"></div>
            <div class="ear left"></div>
            <div class="ear right"></div>
            <div class="eye left"></div>
            <div class="eye right"></div>
            <div class="nose"></div>
            <div class="whisker w1"></div>
            <div class="whisker w2"></div>
            <div class="whisker w3"></div>
            <div class="whisker w4"></div>
            <div class="whisker w5"></div>
            <div class="whisker w6"></div>
            <div class="racket"></div>
          </div>
          ${sparklesAroundMascot()}
        </div>`;
    }
    function sparklesAroundMascot(){
      const spots=[[2,6],[60,0],[80,16],[10,50],[70,52]]
      return spots.map(([l,t],i)=>`<div class="sparkle" style="left:${l}px; top:${t}px; animation-delay:${i*.2}s">‚ú¶</div>`).join('')
    }

    /* ===== Floating hearts ===== */
    function floatingHearts(){
      let hearts='';
      for(let i=0;i<3;i++){
        const delay=Math.random()*3; const left=20 + Math.random()*60;
        hearts += `<div class="float" style="left:${left}%; animation-delay:${delay}s">‚ô•</div>`;
      }
      return hearts;
    }

    /* ===== Deck ===== */
    function buildDeck(){
      const deck=document.getElementById('deck'); deck.innerHTML='';
      wishes.forEach((w,idx)=>{
        const card=el('div','card'); card.style.zIndex=wishes.length-idx;
        const t=el('div','corner tl'); t.textContent='üè∏';
        const tr=el('div','corner tr'); tr.textContent='üéÄ';
        const bl=el('div','corner bl'); bl.textContent='üéà';
        const br=el('div','corner br'); br.textContent='üéÇ';
        card.append(t,tr,bl,br);

        let inner='';
        if(w.mascot){ inner += mascotHTML(); }
        inner += `<h2 class="title">${w.title}</h2>`;
        if(w.subtitle){ inner += `<p class="subtitle">${w.subtitle}</p>`; }
        if(w.message){ inner += `<p class="message">${w.message}</p>`; }
        if(w.comment){ inner += `<div class="comment">${w.comment}</div>`; }
        inner += floatingHearts();
        card.insertAdjacentHTML('beforeend', inner);

        card.addEventListener('click', function(){
          const cards=[...document.querySelectorAll('.card')];
          const top=Math.max(...cards.map(c=>parseInt(c.style.zIndex)));
          if(parseInt(this.style.zIndex)===top){
            this.classList.add('r'+(idx%10)); this.style.zIndex=1; popConfetti();
            if(!musicStarted){ startMusic(); showNotesBurst(); }
          }
        });

        deck.appendChild(card);
      });
    }

    function restartDeck(){ buildDeck(); spawnShuttles(); }

    // ===== 3D tilt parallax on mouse move =====
    (function(){
      const tiltEl = document.querySelector('.tilt');
      window.addEventListener('mousemove', (e)=>{
        const x=(e.clientX/window.innerWidth - .5)*10; // -5..5
        const y=(e.clientY/window.innerHeight - .5)*-10; // -5..5
        tiltEl.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
      });
    })();

    // ===== Music (WebAudio) ‚Äî Happy Birthday melody =====
    let audioCtx, master, musicStarted=false, isMuted=false;
    const melody = [
      // "Happy Birthday to you"
      ['G4',0.5],['G4',0.5],['A4',1],['G4',1],['C5',1],['B4',2],
      // "Happy Birthday to you"
      ['G4',0.5],['G4',0.5],['A4',1],['G4',1],['D5',1],['C5',2],
      // "Happy Birthday dear ..."
      ['G4',0.5],['G4',0.5],['G5',1],['E5',1],['C5',1],['B4',1],['A4',1],
      // "Happy Birthday to you"
      ['F5',0.5],['F5',0.5],['E5',1],['C5',1],['D5',1],['C5',2]
    ];
    const tempo = 120; // bpm

    function freqOf(note){
      const A4=440; const map={'C':-9,'C#':-8,'Db':-8,'D':-7,'D#':-6,'Eb':-6,'E':-5,'F':-4,'F#':-3,'Gb':-3,'G':-2,'G#':-1,'Ab':-1,'A':0,'A#':1,'Bb':1,'B':2};
      const m=/([A-G]#?b?)(\d)/.exec(note); if(!m) return 0; const n=m[1], o=+m[2]; const semis=map[n] + (o-4)*12; return A4*Math.pow(2, semis/12);
    }

    function startAudio(){
      if(!audioCtx){ audioCtx = new (window.AudioContext||window.webkitAudioContext)(); master=audioCtx.createGain(); master.gain.value=.18; master.connect(audioCtx.destination); }
    }

    function playNoteAt(freq, when, dur){
      const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
      o.type='triangle'; o.frequency.value=freq; o.connect(g); g.connect(master);
      const now=audioCtx.currentTime; g.gain.setValueAtTime(0, when);
      g.gain.linearRampToValueAtTime(0.9, when+0.01);
      g.gain.linearRampToValueAtTime(0.0001, when+dur*0.92);
      o.start(when); o.stop(when+dur);
    }

    let loopId;
    function startMusic(){
      startAudio(); musicStarted=true; const beat = 60/tempo; let t=audioCtx.currentTime + .05;
      melody.forEach(([n,len])=>{ playNoteAt(freqOf(n), t, len*beat); t += len*beat; });
      // loop after a short pause
      const total = melody.reduce((s, [,l])=>s+l,0) * beat; // seconds
      loopId = setInterval(()=>{
        if(!isMuted){
          let t=audioCtx.currentTime + .05; melody.forEach(([n,len])=>{ playNoteAt(freqOf(n), t, len*beat); t += len*beat; });
          showNotesBurst();
        }
      }, (total+0.6)*1000);
    }

    function toggleMusic(){
      if(!musicStarted){ startMusic(); return }
      isMuted = !isMuted; master.gain.value = isMuted ? 0 : .18; document.getElementById('toggleMusic').textContent = isMuted ? 'üîá' : 'üîà';
      showNotesBurst();
    }

    function showNotesBurst(){
      const holder=document.getElementById('notes');
      for(let i=0;i<6;i++){
        const n=el('div','note'); n.textContent = ['‚ô™','‚ô©','‚ô´','‚ô¨'][Math.floor(Math.random()*4)];
        n.style.left = (Math.random()*6)+'px'; n.style.animationDelay = (Math.random()*0.2)+'s'; holder.appendChild(n);
        setTimeout(()=> n.remove(), 2200);
      }
    }

    document.getElementById('toggleMusic').addEventListener('click', toggleMusic);

    // Overlay start
    document.getElementById('startBtn').addEventListener('click', ()=>{
      document.getElementById('overlay').style.display='none';
      startMusic(); popConfetti(); showNotesBurst();
    });

    // Also start on first card tap
    window.addEventListener('pointerdown', ()=>{
      if(!musicStarted && document.getElementById('overlay').style.display!=='none'){
        document.getElementById('overlay').style.display='none';
        startMusic(); showNotesBurst();
      }
    }, { once:true });

    // ===== Init =====
    function init(){ spawnShuttles(); buildDeck(); }
    init();

    // ===== Optional: little balloons on random intervals =====
    setInterval(()=> {
      const heart=el('div','float');
      heart.textContent = Math.random()>.5 ? 'üéà' : 'üíñ';
      heart.style.left = (20+Math.random()*60)+'%';
      heart.style.top = '70%';
      heart.style.animationDuration = (2.8 + Math.random()*1.4)+'s';
      document.body.appendChild(heart);
      setTimeout(()=> heart.remove(), 3200);
    }, 1400);
  </script>
</body>
</html>
